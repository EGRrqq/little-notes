var ht=Object.defineProperty;var ct=(n,t,s)=>t in n?ht(n,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[t]=s;var w=(n,t,s)=>(ct(n,typeof t!="symbol"?t+"":t,s),s),et=(n,t,s)=>{if(!t.has(n))throw TypeError("Cannot "+s)};var e=(n,t,s)=>(et(n,t,"read from private field"),s?s.call(n):t.get(n)),i=(n,t,s)=>{if(t.has(n))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(n):t.set(n,s)},o=(n,t,s,h)=>(et(n,t,"write to private field"),h?h.call(n,s):t.set(n,s),s);var it=(n,t,s)=>(et(n,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const v of c.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&h(v)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function h(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();var T,D;class lt{constructor(t){i(this,T,void 0);i(this,D,void 0);w(this,"setCanvasFullSize",()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight});w(this,"clearCanvasData",()=>{var t;(t=this.ctx)==null||t.clearRect(0,0,this.canvas.width,this.canvas.height)});w(this,"moveOriginPointTo",(t,s)=>{var h;(h=this.ctx)==null||h.translate(t,s)});w(this,"resetOriginPoint",()=>{var t;(t=this.ctx)==null||t.setTransform(1,0,0,1,0,0)});o(this,T,t),o(this,D,this.canvas.getContext("2d"))}get canvas(){return e(this,T)}get ctx(){return e(this,D)}}T=new WeakMap,D=new WeakMap;var M,O,X;class ut{constructor(){i(this,M,0);i(this,O,0);i(this,X,!1)}get pressed(){return e(this,X)}set pressed(t){o(this,X,t)}getPrevValues(){return[e(this,M),e(this,O)]}setPrevValues(t,s){o(this,M,t),o(this,O,s)}}M=new WeakMap,O=new WeakMap,X=new WeakMap;const u=new ut;var p,Y,R,W,j;class dt{constructor(t,s){i(this,p,void 0);i(this,Y,void 0);i(this,R,t=>{u.pressed=!0,u.setPrevValues(t.clientX,t.clientY)});i(this,W,t=>{u.pressed&&(e(this,Y).activeTool.draw(...u.getPrevValues(),t.clientX,t.clientY),u.setPrevValues(t.clientX,t.clientY))});i(this,j,()=>{u.pressed=!1});o(this,p,t),o(this,Y,s)}attach(){e(this,p).addEventListener("mousedown",e(this,R)),e(this,p).addEventListener("mousemove",e(this,W)),e(this,p).addEventListener("mouseup",e(this,j))}}p=new WeakMap,Y=new WeakMap,R=new WeakMap,W=new WeakMap,j=new WeakMap;var g,S,G,Q,Z;class vt{constructor(t,s){i(this,g,void 0);i(this,S,void 0);i(this,G,t=>{u.pressed=!0,u.setPrevValues(t.touches[0].clientX,t.touches[0].clientY)});i(this,Q,t=>{t.preventDefault(),u.pressed&&(e(this,S).activeTool.draw(...u.getPrevValues(),Math.round(t.touches[0].clientX),Math.round(t.touches[0].clientY)),u.setPrevValues(t.touches[0].clientX,t.touches[0].clientY))});i(this,Z,()=>{u.pressed=!0});o(this,g,t),o(this,S,s)}attach(){e(this,g).addEventListener("touchstart",e(this,G)),e(this,g).addEventListener("touchmove",e(this,Q)),e(this,g).addEventListener("touchend",e(this,Z))}}g=new WeakMap,S=new WeakMap,G=new WeakMap,Q=new WeakMap,Z=new WeakMap;var b,_,d,P;class pt{constructor(t){i(this,d);i(this,b,void 0);i(this,_,"pen");o(this,b,t)}get type(){return e(this,_)}draw(t,s,h,r){e(this,d,P).beginPath(),e(this,d,P).moveTo(t,s),e(this,d,P).lineTo(h,r),e(this,d,P).closePath(),e(this,d,P).stroke()}settings(){}}b=new WeakMap,_=new WeakMap,d=new WeakSet,P=function(){return e(this,b)};var V,A,N,F,I,z,$,ot;class nt{constructor(){i(this,$);i(this,V,"");i(this,A,[]);i(this,N,"");i(this,F,0);i(this,I,0);i(this,z,[0,0]);it(this,$,ot).call(this,3)}get id(){return e(this,V)}get type(){return e(this,N)}set type(t){o(this,N,t)}get x(){return e(this,F)}set x(t){o(this,F,t)}get y(){return e(this,I)}set y(t){o(this,I,t)}get points(){return e(this,A)}set point(t){e(this,A).push(t)}get lastPoint(){return e(this,z)}set lastPoint(t){o(this,z,t)}get elementData(){return{id:this.id,points:this.points,type:this.type,x:this.x,y:this.y,lastPoint:this.lastPoint}}}V=new WeakMap,A=new WeakMap,N=new WeakMap,F=new WeakMap,I=new WeakMap,z=new WeakMap,$=new WeakSet,ot=function(t=1){let s=0;for(;s<t;)o(this,V,e(this,V)+Math.random().toString(36).substring(2)),s++};var m,E;class gt{constructor(t,s="pen"){i(this,m,void 0);i(this,E,void 0);o(this,m,{});for(let h of t)e(this,m)[h.type]=h;o(this,E,e(this,m)[s])}get tools(){return e(this,m)}get activeTool(){return e(this,E)}set activeTool(t){o(this,E,t)}}m=new WeakMap,E=new WeakMap;var x;class mt{constructor(){i(this,x,[])}get elements(){return e(this,x)}set elements(t){o(this,x,t)}pushElement(t){e(this,x).push(t)}}x=new WeakMap;var C,K,q,J,L,k,rt,a,l,at,U,B,H;class ft{constructor(t){i(this,k);i(this,a);i(this,C,!1);i(this,K,new mt);i(this,q,"LittleNotes");i(this,J,new nt);i(this,L,void 0);w(this,"iterateOverPoints",t=>{for(let s=0,h=t.length-1;s<h;s++){let r=t[s][0],c=t[s][1],v=t[s+1][0],f=t[s+1][1];e(this,L).activeTool.draw(r,c,v,f)}});i(this,U,(t,s)=>{o(this,C,!0),o(this,a,new nt,at),e(this,a,l).type=e(this,L).activeTool.type,e(this,a,l).x=t,e(this,a,l).y=s,e(this,a,l).point=[0,0],e(this,a,l).lastPoint=[0,0]});i(this,B,(t,s)=>{e(this,C)&&(e(this,a,l).point=[t-e(this,a,l).x,s-e(this,a,l).y],e(this,a,l).lastPoint=[t-e(this,a,l).x,s-e(this,a,l).y])});i(this,H,()=>{o(this,C,!1),this.data.pushElement(e(this,a,l).elementData),localStorage.setItem(e(this,k,rt),JSON.stringify(this.data.elements))});o(this,L,t);const s=localStorage.getItem(e(this,q));s&&(e(this,K).elements=JSON.parse(s))}mouseAttach(){window.addEventListener("mousedown",t=>e(this,U).call(this,t.clientX,t.clientY)),window.addEventListener("mousemove",t=>e(this,B).call(this,t.clientX,t.clientY)),window.addEventListener("mouseup",()=>e(this,H).call(this))}touchAttach(){window.addEventListener("touchstart",t=>e(this,U).call(this,Math.round(t.touches[0].clientX),Math.round(t.touches[0].clientY))),window.addEventListener("touchmove",t=>e(this,B).call(this,Math.round(t.touches[0].clientX),Math.round(t.touches[0].clientY))),window.addEventListener("touchend",()=>e(this,H).call(this))}get originPoint(){return[e(this,a,l).x,e(this,a,l).y]}get data(){return e(this,K)}}C=new WeakMap,K=new WeakMap,q=new WeakMap,J=new WeakMap,L=new WeakMap,k=new WeakSet,rt=function(){return e(this,q)},a=new WeakSet,l=function(){return e(this,J)},at=function(t){o(this,J,t)},U=new WeakMap,B=new WeakMap,H=new WeakMap;const st=document.getElementById("board"),y=new lt(st);if(y.ctx){let n=function(){for(let tt of f.data.elements)y.moveOriginPointTo(tt.x,tt.y),f.iterateOverPoints(tt.points),y.resetOriginPoint()},t=function(){y.setCanvasFullSize(),y.clearCanvasData(),requestAnimationFrame(n)};const s=new pt(y.ctx),h=[s],r=new gt(h,s.type),c=new dt(st,r),v=new vt(st,r);c.attach(),v.attach();const f=new ft(r);f.mouseAttach(),f.touchAttach(),window.addEventListener("resize",t),window.addEventListener("load",t,{once:!0})}
