var L=Object.defineProperty;var M=(s,e,t)=>e in s?L(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var u=(s,e,t)=>(M(s,typeof e!="symbol"?e+"":e,t),t),E=(s,e,t)=>{if(!e.has(s))throw TypeError("Cannot "+t)};var o=(s,e,t)=>(E(s,e,"read from private field"),t?t.call(s):e.get(s)),c=(s,e,t)=>{if(e.has(s))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(s):e.set(s,t)},a=(s,e,t,v)=>(E(s,e,"write to private field"),v?v.call(s,t):e.set(s,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))v(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const P of r.addedNodes)P.tagName==="LINK"&&P.rel==="modulepreload"&&v(P)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function v(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();var p,f;class y{constructor(e){c(this,p,void 0);c(this,f,null);u(this,"setCanvasFullSize",()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight});a(this,p,e)}get canvas(){return o(this,p)}get ctx(){return this.canvas.getContext("2d")}set selectTool(e){a(this,f,e)}get selectedTool(){return o(this,f)}}p=new WeakMap,f=new WeakMap;var g,m,w;class C{constructor(){c(this,g,0);c(this,m,0);c(this,w,!1)}get pressed(){return o(this,w)}set pressed(e){a(this,w,e)}getPrevValues(){return[o(this,g),o(this,m)]}setPrevValues(e,t){a(this,g,e),a(this,m,t)}}g=new WeakMap,m=new WeakMap,w=new WeakMap;const i=new C;var d;class x{constructor(e){c(this,d,void 0);u(this,"onMouseDown",e=>{i.pressed=!0,i.setPrevValues(e.clientX,e.clientY)});u(this,"onMouseMove",e=>{var t;i.pressed&&((t=o(this,d).selectedTool)==null||t.draw(e.clientX,e.clientY))});u(this,"onMouseUp",()=>{i.pressed=!1});a(this,d,e),o(this,d).canvas.addEventListener("mousedown",this.onMouseDown),o(this,d).canvas.addEventListener("mousemove",this.onMouseMove),o(this,d).canvas.addEventListener("mouseup",this.onMouseUp)}}d=new WeakMap;var h;class b{constructor(e){c(this,h,void 0);u(this,"onTouchStart",e=>{i.pressed=!0,i.setPrevValues(e.touches[0].pageX,e.touches[0].pageY)});u(this,"onTouchMove",e=>{var t;e.preventDefault(),i.pressed&&((t=o(this,h).selectedTool)==null||t.draw(e.touches[0].pageX,e.touches[0].pageY))});u(this,"onTouchEnd",()=>{i.pressed=!1});a(this,h,e),o(this,h).canvas.addEventListener("touchstart",this.onTouchStart),o(this,h).canvas.addEventListener("touchmove",this.onTouchMove),o(this,h).canvas.addEventListener("touchend",this.onTouchEnd)}}h=new WeakMap;var l;class O{constructor(e){c(this,l,void 0);a(this,l,e)}draw(e,t){o(this,l).ctx&&(o(this,l).ctx.moveTo(...i.getPrevValues()),o(this,l).ctx.lineTo(e,t),o(this,l).ctx.closePath(),o(this,l).ctx.stroke(),i.setPrevValues(e,t))}}l=new WeakMap;const V=document.getElementById("board"),T=new y(V);new x(T);new b(T);const D=new O(T);T.selectTool=D;window.addEventListener("load",T.setCanvasFullSize,{once:!0});
